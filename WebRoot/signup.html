<!DOCTYPE html>
<html lang="en">
  	<head>
	    <meta charset="utf-8">
	    <title>注册---Chinese Recipe</title>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <meta name="description" content="">
	    <meta name="author" content="">

	    <!-- Bootstrap core CSS -->
	    <link href="${ctx}/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		
		<!-- Font Awesome -->
		<link href="${ctx}/css/font-awesome.min.css" rel="stylesheet">

		<!-- ionicons -->
		<link href="${ctx}/css/ionicons.min.css" rel="stylesheet">
		
		<!-- Simplify -->
		<link href="${ctx}/css/simplify.css" rel="stylesheet">
	
  	</head>

  	<body class="overflow-hidden light-background">
		<div class="wrapper no-navigation preload">
			<div class="sign-in-wrapper">
				<div class="sign-in-inner">
					<div class="login-brand text-center">
						 Chinese <strong class="text-skin">Recipe</strong>
					</div>

					<form action="/user/add" method="post" id="regform">
						<div class="form-group m-bottom-md" id="usernamediv">
							<input type="text" class="form-control" autocomplete="off" id="username" name="user.username" value="${(user.username)!}" placeholder="用户名"><span class="label label-danger"></span>
						</div>
						<div class="form-group" id="passworddiv">
							<input type="password" class="form-control" id="password" name="user.password" value="${(user.password)!}"  placeholder="密码">
						</div>
						<div class="form-group" id="repassworddiv">
							<input type="password" class="form-control" id="repassword" name="repassword" placeholder="再次输入密码">
						</div>
						<div class="form-group">
							<div class="custom-checkbox">
								<input type="checkbox" id="chkAccept" name="isAccept">
								<label for="chkAccept"></label>
							</div>
							我接受此协议${ctx!}
						</div>
					<div class="alert alert-danger alert-custom alert-dismissible"
						role="alert" style="display:none;" id="errorInfo">
						<button type="button" class="close" data-dismiss="alert">
							<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
						</button>
						<i class="fa fa-times-circle m-right-xs"></i><strong>错误!</strong>
						<span id="errorInfo">
							${errorMsg!}
						</span>
					</div>
				    
						<div class="m-top-md p-top-sm">
							<a href="#" class="btn btn-success block"  onclick="submit();return false" >创建账号</a>
						</div>

						<div class="m-top-md p-top-sm">
							<div class="font-12 text-center m-bottom-xs">已经有一个账号?</div>
							<a href="signin.html" class="btn btn-default block">登录</a>
						</div>
					</form>
					
				</div><!-- ./sign-in-inner -->
			</div><!-- ./sign-in-wrapper -->
		</div><!-- /wrapper -->

		<a href="" id="scroll-to-top" class="hidden-print"><i class="icon-chevron-up"></i></a>

	    <!-- Le javascript
	    ================================================== -->
	    <!-- Placed at the end of the document so the pages load faster -->
		
		<!-- Jquery -->
		<script src="${ctx}/js/jquery-1.11.1.min.js"></script>
		
		<!-- Bootstrap -->
	    <script src="${ctx}/bootstrap/js/bootstrap.min.js"></script>
		
		<!-- Slimscroll -->
		<script src='${ctx}/js/jquery.slimscroll.min.js'></script>
		
		<!-- Popup Overlay -->
		<script src='${ctx}/js/jquery.popupoverlay.min.js'></script>

		<!-- Modernizr -->
		<script src='${ctx}/js/modernizr.min.js'></script>
		
		<!-- Simplify -->
		<script src="${ctx}/js/simplify/simplify.js"></script>
	
	<script>
	function submit(){
		if ($("#chkAccept").is(':checked')!=true) {
			$("#errorInfo").html($("#errorInfo").html().replace("请勾选协议",""));
			$("#errorInfo").append('请勾选协议');
			$("#errorInfo").css('display','block'); 
			return;
		}else{
			$("#errorInfo").css('display','none'); 
		}
		document.getElementById('regform').submit();
	}
	$(function(){
	 	//用户名失去焦点
	    $("#username").blur(function(){
	        if( $("#username").val().trim()=="")
	        { 
	        	$('#usernamediv').addClass('has-error');
	        }else{
	        	$('#usernamediv').removeClass('has-error');
	        	$('#usernamediv').addClass('has-success');
	        }
	    });
	 	//密码失去焦点
	    $("#password").blur(function(){
	        if( $("#password").val().trim()=="")
	        { 
	        	$('#passworddiv').addClass('has-error');
	        }else{
	        	$('#passworddiv').removeClass('has-error');
	        	$('#passworddiv').addClass('has-success');
	        }
	    });
	 	//验证密码失去焦点
	    $("#repassword").blur(function(){
	        if( $("#repassword").val().trim()!=$("#password").val().trim())
	        { 
	        	$('#repassworddiv').addClass('has-error');
	        }else{
	        	$('#repassworddiv').removeClass('has-error');
	        	$('#repassworddiv').addClass('has-success');
	        }
	    });
	});
	if ("${isError!}") {
		$("#errorInfo").css('display','block'); 
	}else{
		$("#errorInfo").css('display','none'); 
	}
	if ("${msg!}") {
		alert("${msg!}");
	}
	//动态添加错误样式
//		$('#username').addClass('has-error');
//错误提示框
//<div class="alert alert-danger alert-custom alert-dismissible" role="alert">	<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><i class="fa fa-times-circle m-right-xs"></i> <strong>错误!</strong> Change a few things up and try submitting again.</div>
//$('#errorInfo').html('<div class="alert alert-danger alert-custom alert-dismissible" role="alert">	<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><i class="fa fa-times-circle m-right-xs"></i> <strong>错误!</strong> Change a few things up and try submitting again.</div>');
	</script>
  	</body>
</html>
